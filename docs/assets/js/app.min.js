(()=>{var e={969:()=>{},379:e=>{"use strict";var t=[];function r(e){for(var r=-1,i=0;i<t.length;i++)if(t[i].identifier===e){r=i;break}return r}function i(e,i){for(var a={},s=[],o=0;o<e.length;o++){var d=e[o],c=i.base?d[0]+i.base:d[0],l=a[c]||0,u="".concat(c," ").concat(l);a[c]=l+1;var p=r(u),m={css:d[1],media:d[2],sourceMap:d[3],supports:d[4],layer:d[5]};if(-1!==p)t[p].references++,t[p].updater(m);else{var h=n(m,i);i.byIndex=o,t.splice(o,0,{identifier:u,updater:h,references:1})}s.push(u)}return s}function n(e,t){var r=t.domAPI(t);return r.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;r.update(e=t)}else r.remove()}}e.exports=function(e,n){var a=i(e=e||[],n=n||{});return function(e){e=e||[];for(var s=0;s<a.length;s++){var o=r(a[s]);t[o].references--}for(var d=i(e,n),c=0;c<a.length;c++){var l=r(a[c]);0===t[l].references&&(t[l].updater(),t.splice(l,1))}a=d}}},569:e=>{"use strict";var t={};e.exports=function(e,r){var i=function(e){if(void 0===t[e]){var r=document.querySelector(e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}(e);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(r)}},216:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,r)=>{"use strict";e.exports=function(e){var t=r.nc;t&&e.setAttribute("nonce",t)}},795:e=>{"use strict";e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(r){!function(e,t,r){var i="";r.supports&&(i+="@supports (".concat(r.supports,") {")),r.media&&(i+="@media ".concat(r.media," {"));var n=void 0!==r.layer;n&&(i+="@layer".concat(r.layer.length>0?" ".concat(r.layer):""," {")),i+=r.css,n&&(i+="}"),r.media&&(i+="}"),r.supports&&(i+="}");var a=r.sourceMap;a&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(i,e,t.options)}(t,e,r)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function r(i){var n=t[i];if(void 0!==n)return n.exports;var a=t[i]={exports:{}};return e[i](a,a.exports,r),a.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.nc=void 0,(()=>{"use strict";var e=r(379),t=r.n(e),i=r(795),n=r.n(i),a=r(569),s=r.n(a),o=r(565),d=r.n(o),c=r(216),l=r.n(c),u=r(589),p=r.n(u),m=r(969),h=r.n(m),v={};v.styleTagTransform=p(),v.setAttributes=d(),v.insert=s().bind(null,"head"),v.domAPI=n(),v.insertStyleElement=l(),t()(h(),v),h()&&h().locals&&h().locals;class _{#e=!1;#t=!1;#r=0;#i=void 0;#n=void 0;constructor(e,t){if(t){const e=Date.now();this.#e=!0,this.#i=e,this.#t=e-t}this.#n=e||"Undefined"}#a(e){e=Math.floor(e/1e3);let t=Math.floor(e/3600);e%=3600;let r=Math.floor(e/60),i=(t+r/60).toFixed(2),n=e%60;return t<10&&(t=`0${t}`),r<10&&(r=`0${r}`),n<10&&(n=`0${n}`),`${t}:${r}:${n} — ${i}`}get durationSeconds(){const e=Date.now();return this.#e&&!this.#i?e-this.#t-this.#r:this.#e?e-this.#t-(e-this.#i+this.#r):0}get getTime(){return!(!this.#e||this.#i)&&this.#a(Date.now()-this.#t-this.#r)}get timeForReload(){return this.#a(Date.now()-this.#t-this.#r)}get isPaused(){return!!this.#i}get timerData(){return{activated:this.#e,started:this.#t,paused:this.#r,pauseStarted:this.#i,title:this.#n}}set title(e){this.#n=e}playPause(){const e=Date.now();this.#e?this.#i?(this.#r+=e-this.#i,this.#i=void 0):this.#i=e:(this.#e=!0,this.#t=e)}restart(){this.#e=!1,this.#t=!1,this.#r=0,this.#i=void 0}}const g=new class{constructor(){this.baseArea=void 0,this.timersArea=void 0,this.timerCreatorInputTitle=void 0}clearCreatorTimerTitle(){return this.timerCreatorInputTitle.value="",!0}removeTimer(e){const t=this.timersArea.querySelector(`[data-id="${e}"]`);t&&t.remove()}_generateElement(e,t,r={}){const i=document.createElement(e);switch(Array.isArray(t)?i.classList.add(...t):i.classList.add(t),e){case"input":switch(i.type=r.type??"text",r.name&&(i.name=r.name),r.disabled&&(i.disabled=!0),r.type){case"file":i.multiple=r.multiple??!1,i.accept=r.accept??!1;break;case"text":i.autocomplete=r.autocomplete??!1,i.placeholder=r.placeholder??!1;break;case"checkbox":case"radio":i.checked=r.checked??null}break;case"div":case"span":i.innerText=r.innerText??null;break;case"button":i.type=r.type??"button",i.innerText=r.innerText??null}return i}_generateSettingsCheckbox(e,t,r){const i=this._generateElement("label","settings__item"),n=this._generateElement("input","settings__item-input",{type:"checkbox",name:`settings-${e}`,checked:r}),a=this._generateElement("span","settings__item-text",{innerText:t});return i.appendChild(n),i.appendChild(a),i}renderBaseDOM(e){const t=this._generateElement("div","timersArea"),r=this._generateElement("div","creator"),i=this._generateElement("input","creator__title",{type:"text",autocomplete:"off",placeholder:"Название таймера"}),n=this._generateElement("button",["creator__button","creator__button-create","creator__button-with-icon"],{innerText:"Создать"}),a=this._generateElement("div","timers"),s=this._generateElement("button",["creator__button","creator__button-export","creator__button-with-icon"],{innerText:"Выгрузить"}),o=this._generateElement("button",["creator__button","creator__button-import","creator__button-with-icon"],{innerText:"Загрузить"}),d=this._generateElement("input","creator__file",{type:"file",multiple:!1,accept:".json"}),c=this._generateElement("button",["creator__button","creator__button-settings"]),l=this._generateElement("div","settings"),u=this._generateElement("div","settings__grid");return this.baseArea=t,i.dataset.area="creator-title-input",this.timerCreatorInputTitle=i,this.timersArea=a,[this._generateSettingsCheckbox("autostop","Останавливать при добавлении нового",!1),this._generateSettingsCheckbox("stopOnReload","Останавливать при перезагрузке страницы",!0),this._generateSettingsCheckbox("oneplay","Только один активный",!1),this._generateSettingsCheckbox("replaceImport","Заменять при импорте",!1)].forEach((e=>{u.appendChild(e)})),[i,n,s,o,d,c].forEach((e=>{r.appendChild(e)})),l.appendChild(u),[r,l,a].forEach((e=>{t.appendChild(e)})),document.body.appendChild(t),{baseArea:t,timerCreatorArea:r,timerCreatorInputTitle:i,timerCreatorButton:n,exportButton:s,importButton:o,importInput:d,settingsArea:l,settingsButton:c,timersArea:a}}renderTimerDOM(e,t){const r=this._generateElement("div","timer"),i=this._generateElement("input","timer__title-input"),n=this.timerCreatorInputTitle.value.trim(),a=this._generateElement("div","timer__result",{innerText:"00:00:00 — 0.00"}),s=this._generateElement("div",["timer__button","timer__button_playpause","timer__button_playpause-paused"]),o=this._generateElement("div",["timer__button","timer__button_remove"]),d=this._generateElement("div",["timer__button","timer__button_restart"]);return r.dataset.id=e,i.value=n.length?n:t.defaultTitle?t.defaultTitle:"Untitled",[i,s,a,d,o].forEach((e=>{r.appendChild(e)})),this.timersArea.appendChild(r),this.clearCreatorTimerTitle(),{timerArea:r,timerTitleInput:i,timerPlayPause:s,timerResult:a,timerRestart:d,timerRemove:o}}},f=new Map,b=new class{get data(){return localStorage.getItem("timers")??!1}get available(){let e;try{e=window.localStorage;let t="__storage_test__";return e.setItem(t,t),e.removeItem(t),!0}catch(t){return t instanceof DOMException&&(22===t.code||1014===t.code||"QuotaExceededError"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name)&&e&&0!==e.length}}save(e){const t=JSON.stringify(e);localStorage.setItem("timers",t)}};let y=0;const E=b.available,T=()=>{const e=g.renderTimerDOM(y,{}),t=new _(e.timerTitleInput.value);f.set(y,{timerDOM:e,controls:t}),e.timerPlayPause.addEventListener("click",C.bind(void 0,t,e)),e.timerRestart.addEventListener("click",S.bind(void 0,t,e)),e.timerRemove.addEventListener("click",k.bind(void 0,y)),e.timerTitleInput.addEventListener("keyup",x.bind(void 0,t,e)),y++},x=(e,t,r)=>{const i=r.target.value.trim();i.length>0&&(e.title=i,w())},S=(e,t)=>{confirm("Вы уверены, что хотите перезапустить таймер?")&&(e.restart(),e.isPaused||t.timerPlayPause.classList.add("timer__button_playpause-paused"),t.timerResult.innerText="00:00:00 — 0.00")},C=(e,t)=>{e.playPause(),e.isPaused?t.timerPlayPause.classList.add("timer__button_playpause-paused"):t.timerPlayPause.classList.remove("timer__button_playpause-paused")},k=e=>{confirm("Вы уверены, что хотите удалить таймер?")&&(f.delete(e),g.removeTimer(e))},w=(e=!1)=>{if(E){const t=[];for(const e of f.keys()){const r=f.get(e),i={duration:r.controls.durationSeconds,title:r.controls.timerData.title};t.push(i)}if(e)return t;b.save(t)}return!1},L=e=>{try{e.forEach(((e,t)=>{const r=g.renderTimerDOM(t,{defaultTitle:e.title}),i=new _(e.title,e.duration);f.set(t,{timerDOM:r,controls:i}),r.timerPlayPause.addEventListener("click",C.bind(void 0,i,r)),r.timerRestart.addEventListener("click",S.bind(void 0,i,r)),r.timerRemove.addEventListener("click",k.bind(void 0,t)),r.timerTitleInput.addEventListener("keyup",x.bind(void 0,i,r)),r.timerResult.innerText=i.timeForReload.length>18?"00:00:00 — 0.00":i.timeForReload,y++}))}catch(e){throw new Error(e)}},A=e=>{const t=e.target;if(1===t.files.length){const e=t.files[0],r=new FileReader;r.readAsText(e),r.onload=function(){const e=JSON.parse(r.result);e.length>0&&L(e)}}},I=()=>{const e=w(!0);if(e.length>0){const t=JSON.stringify(e),r="data:application/json;charset=utf-8,"+encodeURIComponent(t),i=new Date;let n="data_timers.json",a=i.getFullYear(),s=i.getMonth()+1,o=i.getDate();s<10&&(s=`0${s}`),o<10&&(o=`0${o}`),n=`${o}.${s}.${a}-${n}`;const d=document.createElement("a");d.setAttribute("href",r),d.setAttribute("download",n),d.click()}};document.addEventListener("DOMContentLoaded",(()=>{const e=g.renderBaseDOM();if(document.addEventListener("keypress",(e=>{const t=e.target;"Enter"===e.key&&"creator-title-input"===t.dataset.area&&t.value.length>0&&T()})),E){const e=JSON.parse(b.data);e.length>0&&L(e)}e.importButton.addEventListener("click",(()=>{e.importInput.click()})),e.timerCreatorButton.addEventListener("click",T),e.exportButton.addEventListener("click",I),e.importInput.addEventListener("change",A),e.settingsButton.addEventListener("click",(()=>{e.settingsArea.classList.toggle("settings-active"),e.settingsButton.classList.toggle("creator__button-settings_active")})),setInterval((()=>{for(const e of f.keys()){const t=f.get(e),r=t.controls.getTime;r&&(t.timerDOM.timerResult.innerText=r)}w()}),1e3)}))})()})();
//# sourceMappingURL=app.min.js.map